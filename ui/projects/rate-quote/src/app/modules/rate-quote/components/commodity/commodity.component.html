<ng-container [formGroup]="commodityForm">
  <div class="form-row d-flex flex-wrap commodity-container">
    <div
      class="class form-group col-sm-12 col-md-auto"
      [class.flex-grow-0]="isRateEstimate || ltlOnly === true"
    >
      <mat-form-field appearance="outline" class="wrapper-padding-0">
        <mat-label>Class</mat-label>
        <mat-select
          id="shipClass{{ index }}"
          formControlName="shipClass"
          [required]="formService.hasRequiredField(shipClass)"
        >
          <mat-option [value]="o" *ngFor="let o of classes$ | async">{{ o }}</mat-option>
        </mat-select>
        <mat-error *ngIf="shipClass.invalid">{{
          formService.getErrorMessage(shipClass)
        }}</mat-error>
      </mat-form-field>
    </div>
    <div
      *ngIf="!isRateEstimate && ltlOnly === false"
      class="pieces form-group col-sm-12 col-md-auto"
    >
      <mat-form-field appearance="outline" class="wrapper-padding-0">
        <mat-label>Pieces</mat-label>
        <input
          id="pieces{{ index }}"
          matInput
          formControlName="pieces"
          [required]="formService.hasRequiredField(pieces)"
        />
        <mat-error *ngIf="pieces.invalid">{{ formService.getErrorMessage(pieces) }}</mat-error>
      </mat-form-field>
    </div>
    <div
      *ngIf="!isRateEstimate && ltlOnly === false"
      class="pieces-type form-group col-sm-12 col-md-auto"
    >
      <mat-form-field appearance="outline" class="wrapper-padding-0">
        <mat-label>Pieces Type</mat-label>
        <mat-select
          id="pieceType{{ index }}"
          formControlName="pieceType"
          [required]="formService.hasRequiredField(pieceType)"
        >
          <mat-option [value]="o.code" *ngFor="let o of packageTypes$ | async">{{
            o.description
          }}</mat-option>
        </mat-select>
        <mat-error *ngIf="pieceType.invalid">{{
          formService.getErrorMessage(pieceType)
        }}</mat-error>
      </mat-form-field>
    </div>
    <div
      class="weight form-group col-sm-12 col-md-auto"
      [class.flex-grow-0]="isRateEstimate || ltlOnly === true"
    >
      <mat-form-field appearance="outline" class="wrapper-padding-0">
        <mat-label>Total Weight</mat-label>
        <input
          id="weight{{ index }}"
          matInput
          formControlName="weight"
          [required]="formService.hasRequiredField(weight)"
        />
        <mat-hint>lbs.</mat-hint>
        <mat-error *ngIf="weight.invalid">{{ formService.getErrorMessage(weight) }}</mat-error>
      </mat-form-field>
    </div>
    <div
      *ngIf="!isRateEstimate && ltlOnly === false"
      class="length form-group col-sm-12 col-md-auto"
    >
      <mat-form-field appearance="outline" class="wrapper-padding-0">
        <mat-label>Length</mat-label>
        <input
          id="length{{ index }}"
          matInput
          formControlName="length"
          [required]="formService.hasRequiredField(length)"
        />
        <mat-hint>inches</mat-hint>
        <mat-error *ngIf="length.invalid">{{ formService.getErrorMessage(length) }}</mat-error>
      </mat-form-field>
    </div>
    <div
      *ngIf="!isRateEstimate && ltlOnly === false"
      class="width form-group col-sm-12 col-md-auto"
    >
      <mat-form-field appearance="outline" class="wrapper-padding-0">
        <mat-label>Width</mat-label>
        <input
          id="width{{ index }}"
          matInput
          formControlName="width"
          [required]="formService.hasRequiredField(width)"
        />
        <mat-hint>inches</mat-hint>
        <mat-error *ngIf="width.invalid">{{ formService.getErrorMessage(width) }}</mat-error>
      </mat-form-field>
    </div>
    <div
      *ngIf="!isRateEstimate && ltlOnly === false"
      class="height form-group col-sm-12 col-md-auto"
    >
      <mat-form-field appearance="outline" class="wrapper-padding-0">
        <mat-label>Height</mat-label>
        <input
          id="height{{ index }}"
          matInput
          formControlName="height"
          [required]="formService.hasRequiredField(height)"
        />
        <mat-hint>inches</mat-hint>
        <mat-error *ngIf="height.invalid">{{ formService.getErrorMessage(height) }}</mat-error>
      </mat-form-field>
    </div>
  </div>
  <p *ngIf="!isRateEstimate && ltlOnly === false" class="help-block">
    NOTE: Only volume and exclusive use rates will display if your shipment exceeds 350 cubic feet
    unless there are different thresholds noted for your account.
  </p>
  <div class="form-row">
    <div class="form group col-md-12">
      <mat-form-field appearance="outline">
        <mat-label>Description</mat-label>
        <textarea
          matInput
          rows="1"
          name="description"
          id="description{{ index }}"
          formControlName="description"
        ></textarea>
        <mat-error *ngIf="description.invalid">{{
          formService.getErrorMessage(description)
        }}</mat-error>
      </mat-form-field>
    </div>
  </div>
  <div *ngIf="canDelete" class="d-flex justify-content-end w-100">
    <button (click)="delete()" id="removeCommodity{{ index }}" class="btn btn-default">
      Remove
    </button>
  </div>
</ng-container>
